#!/bin/sh

was_low=0 # zero means true

while true; do
	capacity="$(cat /sys/class/power_supply/BAT0/capacity)"

	[ "$capacity" -le 20 ]
	is_low="$?"

	if [ "$is_low" -eq 0 ] && [ "$was_low" -ne 1 ]; then
		swaynag -twarning -ybottom -m "Battery low ($capacity%)"
	fi

	was_low="$is_low"
	sleep 10
done
